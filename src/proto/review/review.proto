syntax = "proto3";

import "auth/user_token.proto";

package review;

service ReviewService {
    rpc CreateReview (CreateReviewRequest) returns (CreateReviewResponse);
    rpc EditReview (EditReviewRequest) returns (EditReviewResponse);
    rpc DeleteReview (DeleteReviewRequest) returns (DeleteReviewResponse);
    rpc FindAllReviews (FindAllReviewsRequest) returns (FindAllReviewsResponse);
    rpc FindOneReview (FindOneReviewRequest) returns (FindOneReviewResponse);
}

message CreateReviewRequest {
    userToken.User user = 1;
    string service_id = 2;
    string description = 3;
    float rating = 4;
    string user_id = 5;
}

message Review {
    string id = 1;
    string type = 2;
    string service_id = 3;
    string user_id = 4;
    string description = 5;
    float rating = 6;
    string created_at = 7;
    string updated_at = 8;
}

message CreateReviewResponse {
    string id = 1; // Review ID generated by the system
}

message EditReviewRequest {
    userToken.User user = 1;
    string id = 2; // ID of the review to be edited
    string description = 3; // Updated description (optional)
    float rating = 4; // Updated rating (optional)
}

message EditReviewResponse {
    string result = 1; // Success or error message
}

message DeleteReviewRequest {
    userToken.User user = 1;
    string id = 2; // ID of the review to be deleted
}

message DeleteReviewResponse {
    string result = 1; // Success or error message
}

message FindAllReviewsRequest {
    userToken.User user = 1;
}

message FindAllReviewsResponse {
    repeated Review reviews = 1; // List of reviews
}

message FindOneReviewRequest {
    userToken.User user = 1;
    string id = 2; // ID of the review to be found
}

message FindOneReviewResponse {
    Review review = 1; // Found review
}